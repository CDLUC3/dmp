<% signin = true unless signin %>
<% url = registration_path("user") unless url %>
<% org = nil unless org %>

<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-body">
      <button type="button" class="close pull-right" data-dismiss="modal" aria-label="<%= _('Cancel') %>">
        <span class="fa fa-times" aria-hidden="true">&nbsp;</span>
      </button>

      <ul id="access-control-tabs" class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
          <a data-target="#sign-in-form-tab" role="tab" aria-controls="sign-in-form" data-toggle="tab">
            <%= _('Sign in') %>
          </a>
        </li>
        <li role="presentation">
          <a data-target="#create-account-form-tab" role="tab" aria-controls="create-account-form" data-toggle="tab">
            <%= _('Create account') %>
          </a>
        </li>
      </ul>

      <div class="tab-content">
        <div id="signin-create-content" role="tabpanel" class="tab-pane active">
          <%= form_for resource, as: 'user', url: url, 
                     html: {autocomplete: "off", id: "signin_create_form"} do |f| %>
            <div class="row create-account-fields">
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label(:firstname, _('First Name'), class: "control-label") %>
                  <%= f.text_field(:firstname, class: "form-control", "aria-required": true) %>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label(:surname, _('Last Name'), class: "control-label") %>
                  <%= f.text_field(:surname, class: "form-control", "aria-required": true) %>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <%= f.label(:email, _('Email'), class: "control-label") %>
                  <%= f.email_field(:email, class: "form-control", "aria-required": true) %>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <%= f.label(:password, _('Password'), class: "control-label") %>
                  <%= f.password_field(:password, class: "form-control", "aria-required": true) %>
                </div>
              </div>
            </div>

            <div class="row create-account-fields">
              <div class="col-md-12">
                <div class="checkbox pull-left">
                  <%= f.label(:accept_terms,
                      raw("#{ f.check_box(:accept_terms, "aria-required": true, "data-validation-error": _('You must agree to the term and conditions.')) } #{_('I accept the')} <a href=\"#{terms_path}\">#{_('terms and conditions')}</a>")) %>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <%= f.hidden_field :org_id, { value: (org.present? ? org.id : '') } %>
                <%= f.button (signin ? _('Sign in') : _('Create account')), 
                             class: "btn btn-default", type: "submit" %>
              </div>
              <div class="col-md-6 signin-fields">
                <%= link_to _('Forgot email?'), users_ldap_username_path, class: 'pull-right' %>
                <br/>
                <%= link_to _('Forgot password?'), new_password_path('user'), class: 'pull-right' %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
